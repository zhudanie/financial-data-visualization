knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
readxl("~/Exp-Backup 2021_08_01.xlsx")
read_xlsx("~/Exp-Backup 2021_08_01.xlsx")
read_xlsx("~/Exp-Backup 2021_08_01.xlsx")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
read_xlsx("~/Exp-Backup 2021_08_01.xlsx")
read_excel("~/Exp-Backup 2021_08_01.xlsx")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
readxl("~/Exp-Backup 2021_08_01.xlsx")
read_xlsx("~/Exp-Backup 2021_08_01.xlsx")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
install.packages("tidyverse")
install.packages("tidyverse")
knitr::opts_chunk$set(echo = TRUE)
#install.packages("tidyverse")
library(tidyverse)
read_xlsx("~/Exp-Backup 2021_08_01.xlsx")
install.packages("readxl")
library(readxl)
yo <- read_xlsx("~/Exp-Backup 2021_08_01.xlsx")
install.packages("readxl")
install.packages("readxl")
library(readxl)
yo <- read_xlsx("~/Exp-Backup 2021_08_01.xlsx")
#install.packages("readxl")
library(readxl)
yo <- read_xlsx("~/Exp-Backup 2021_08_01.xlsx")
knitr::opts_chunk$set(echo = TRUE)
#install.packages("tidyverse")
library(tidyverse)
#install.packages("readxl")
library(readxl)
yo <- read_xlsx("~/Exp-Backup 2021_08_01.xlsx")
library(readxl)
Exp_Backup_2021_08_01 <- read_excel("stock_data/Exp-Backup 2021_08_01.xlsx")
library(readxl)
Exp_Backup_2021_08_01 <- read_excel("stock_data/Exp-Backup 2021_08_01.xlsx")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
df1 <- read_excel("stock_data/Exp-Backup 2021_08_01.xlsx")
colnames(df1) <- paste("day1", colnames(df1) - "Ticker", sep = "_")
df2 <- read_excel("stock_data/Exp-Backup 2021_08_02.xlsx")
Master <- cbind(df1, df2)
Master <- rbind(df1, df2)
library(tidyverse)
library(readxl)
library(dplyr)
Master <- rbind(df1, df2)
Master <- cbind(df1, df2)
Master <- rbind(df1, df2)
View(df1)
View(df2)
df1 <- rename(df1, Date = `Set - 6 Errors`)
df2 <- rename(df2, Date = `Set - 19 Errors`)
Master <- rbind(df1, df2)
View(Master)
View(Master)
Master2 <- pivot_wider(Master, names_from = Date, values_from = Price)
View(Master2)
names(df1) <- c("date", "Ticker")
library(tidyverse)
library(readxl)
library(dplyr)
df1 <- read_excel("stock_data/Exp-Backup 2021_08_01.xlsx")
colnames(df1) <- paste("day1", colnames(df1), sep = "_")
df2 <- read_excel("stock_data/Exp-Backup 2021_08_02.xlsx")
colnames(df2) <- paste("day2", colnames(df2), sep = "_")
names(df1) <- c("date", "Ticker")
names(df1)[names(df1) == "day1_Ticker"] <- "Ticker"
df1 <- read_excel("stock_data/Exp-Backup 2021_08_01.xlsx")
colnames(df1) <- paste("day1", colnames(df1), sep = "_")
names(df1)[names(df1) == "day1_Ticker"] <- "Ticker"
view(df1)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(dplyr)
library(fs)
file_paths <- fs::dir_ls("stock_data")
composite <- read_excel(file_paths[1])
colnames(composite) <- paste(paste("day", 0), colnames(composite), sep = "_")
names(composite)[names(composite) == paste(paste("day", 0), "Ticker", sep = "_")] <- "Ticker"
composite <- composite %>% distinct()
for (i in seq_along(file_paths)[-1]) {
df1 <- read_excel(file_paths[i])
colnames(df1) <- paste(paste("day", i), colnames(df1), sep = "_")
names(df1)[names(df1) == paste(paste("day", i), "Ticker", sep = "_")] <- "Ticker"
df1 <- df1 %>% distinct()
composite <- merge(composite, df1, by = "Ticker")
}
view(composite)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(dplyr)
library(fs)
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)]
# Add prefix "day1_" to each of the column names so merging works
colnames(composite) <- paste(paste("day", 1), colnames(composite), sep = "_")
# Remove prefix from Ticker variable so we can merge on ticker
names(composite)[names(composite) == paste(paste("day", 1), "Ticker", sep = "_")] <- "Ticker"
# Drop duplicate observations
composite <- composite %>% distinct()
view(composite)
library(tidyverse)
library(readxl)
library(dplyr)
library(fs)
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)]
# Add prefix "day1_" to each of the column names so merging works
colnames(composite) <- paste(paste("day", 1), colnames(composite), sep = "_")
# Remove prefix from Ticker variable so we can merge on ticker
names(composite)[names(composite) == paste(paste("day", 1), "Ticker", sep = "_")] <- "Ticker"
# Drop duplicate observations
composite <- composite %>% distinct()
# This loop repeats the above process for each file in the file path
for (i in seq_along(file_paths)[-1]) {
df1 <- read_excel(file_paths[i])
df1 <- df1[-c(3:19, 42:73)]
colnames(df1) <- paste(paste("day", i), colnames(df1), sep = "_")
names(df1)[names(df1) == paste(paste("day", i), "Ticker", sep = "_")] <- "Ticker"
df1 <- df1 %>% distinct()
composite <- merge(composite, df1, by = "Ticker")
}
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)]
# Add prefix "day1_" to each of the column names so merging works
colnames(composite) <- paste(paste("day", 1), colnames(composite), sep = "_")
# Remove prefix from Ticker variable so we can merge on ticker
names(composite)[names(composite) == paste(paste("day", 1), "Ticker", sep = "_")] <- "Ticker"
# Drop duplicate observations
composite <- composite %>% distinct()
view(composite)
view(composite)
for (i in seq_along(file_paths)[-1]) {
df1 <- read_excel(file_paths[i])
df1 <- df1[-c(3:19, 42:73)]
colnames(df1) <- paste(paste("day", i), colnames(df1), sep = "_")
names(df1)[names(df1) == paste(paste("day", i), "Ticker", sep = "_")] <- "Ticker"
df1 <- df1 %>% distinct()
composite <- merge(composite, df1, by = "Ticker")
}
View(composite)
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)]
# Add prefix "day1_" to each of the column names so merging works
colnames(composite) <- paste(paste("day", 1), colnames(composite), sep = "_")
# Remove prefix from Ticker variable so we can merge on ticker
names(composite)[names(composite) == paste(paste("day", 1), "Ticker", sep = "_")] <- "Ticker"
# Drop duplicate observations
composite <- composite %>% distinct()
view(composite)
df1 <- read_excel(file_paths[1])
df1 <- df1[-c(3:19, 42:73)]
view(df1)
df2 <- read_excel(file_paths[2])
df2 <- df2[-c(3:19, 42:73)]
view(df2)
df1 <- read_excel(file_paths[1])
df1 <- df1[-c(3:19, 42:73)]
df1 <- df1 %>% distinct()
df2 <- read_excel(file_paths[2])
df2 <- df2[-c(3:19, 42:73)]
df2 <- df2 %>% distinct()
master <- df1[1:2]
view(master)
master <- df1[2]
columns <- colnames(df1)[-1:2]
columns <- colnames(df1)[-1,-2]
columns <- colnames(df1)[-1][-2]
columns
columns <- colnames(df1)[-1][-3]
columns
columns <- colnames(df1)[-1,-2]
columns <- colnames(df1)[-c(1,2)]
columns
view(master)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(dplyr)
library(fs)
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)]
glimpse(composite)
composite %>% filter(composite$Ticker == "AAPL")
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
view(composite)
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
for (i in seq_along(file_paths)[-1]) {
df1 <- read_excel(file_paths[i]) %>%
df1[-c(3:19, 42:73)] %>%
filter(composite$Ticker == "AAPL")
composite <- full_join(composite, df1)
}
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
for (i in seq_along(file_paths)[-1]) {
df1 <- read_excel(file_paths[i])
df1 <- df1[-c(3:19, 42:73)] %>%
filter(composite$Ticker == "AAPL")
composite <- full_join(composite, df1)
}
df1 <- read_excel(file_paths[2])
df1 <- df1[-c(3:19, 42:73)] %>%
filter(composite$Ticker == "AAPL")
df1
view(df1)
df1 <- df1[-c(3:19, 42:73)] %>%
filter(df1$Ticker == "AAPL")
composite <- full_join(composite, df1)
view(composite)
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
df1 <- read_excel(file_paths[2])
df1 <- df1[-c(3:19, 42:73)] %>%
filter(df1$Ticker == "AAPL")
composite <- full_join(composite, df1)
view(composite)
composite <- colnames(c(Date))
composite <- colnames(c("Date"))
view(composite)
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
composite <- colnames(c("Date"))
view(composite)
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
composite <- colnames(c("Date"))
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
colnames(composite) <- c("Date")
View(composite)
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
colnames(composite)[1] <- c("Date")
View(composite)
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
colnames(composite)[1] <- c("Date")
for (i in seq_along(file_paths)[-1]) {
df1 <- read_excel(file_paths[i])
df1 <- df1[-c(3:19, 42:73)] %>%
filter(df1$Ticker == "AAPL")
colnames(df1)[1] <- c("Date")
composite <- full_join(composite, df1)
}
View(composite)
View(composite)
View(composite)
write_excel_csv(composite, "newdata.csv")
ggplot(data=df2, aes(x=dose, y=len, group=supp)) +
geom_line()+
geom_point()
ggplot(data=composite, aes(x=price, y=date, group=supp)) +
geom_line()+
geom_point()
ggplot(data=composite, aes(x=Price, y=Date, group=supp)) +
geom_line()+
geom_point()
ggplot(data=composite, aes(x=Price, y=Date)) +
geom_line()+
geom_point()
ggplot(data=composite, aes(x=Date, y=Price)) +
geom_line()+
geom_point()
df1 %>% %>% mutate(index=1:n())
df1 %>% mutate(index=1:n())
ggplot(data=composite, aes(x=Date, y=index)) +
geom_line()
composite %>% mutate(index=1:n())
ggplot(data=composite, aes(x=Date, y=index)) +
geom_line()
composite %>% mutate(index=1:n())
ggplot(data=composite, aes(x=Date, y=index)) +
geom_line()
composite <- composite %>% mutate(index=1:n())
ggplot(data=composite, aes(x=Date, y=index)) +
geom_line()
view(composite)
ggplot(data=composite, aes(x=index, y=Price)) +
geom_line()
ggplot() +
geom_line(data=composite, aes(x=index, y=Price)) +
geom_line(data=composite, aes(x=index, y="P/E"))
ggplot() +
geom_line(data=composite, aes(x=index, y=Price)) +
geom_line(data=composite, aes(x=index, y='P/E'))
ggplot(data=composite, aes(x=index, y=Price)) +
geom_line(data=composite, aes(x=index, y='P/E'))
knitr::opts_chunk$set(echo = TRUE)
ile_paths <- fs::dir_ls("stock_data")
file_paths
brary(tidyverse)
library(tidyverse)
library(readxl)
library(dplyr)
library(fs)
file_paths <- fs::dir_ls("stock_data")
file_paths
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
colnames(composite)[1] <- c("Date")
for (i in seq_along(file_paths)[-1]) {
df1 <- read_excel(file_paths[i])
df1 <- df1[-c(3:19, 42:73)] %>%
filter(df1$Ticker == "AAPL")
colnames(df1)[1] <- c("Date")
composite <- full_join(composite, df1)
}
view(composite)
columns <- colnames(composite)
for (col in columns){
difference <- diff(composite$col)
}
price_difference <- diff(composite$price)
price_difference <- diff(composite$Price)
price_difference
composite %>%
mutate_all(funs(. - lag(.))) %>%
na.omit()
composite[3:36] %>%
mutate_all(funs(. - lag(.))) %>%
na.omit()
for (col in columns){
composite <- mutate(composite, cbind(col, "_diff") = col - lag(col))
for (col in columns){
df <- composite %>% mutate(cbind(col, "_diff") = col - lag(col))
composite %>% mutate(price_diff = Price - lag(Price))
view(composite)
df <- composite %>% mutate(price_diff = Price - lag(Price))
df
view(df)
df <- composite %>% mutate((cbind(col, "_diff")) = col - lag(col))
}
for (col in columns){
df <- composite %>% mutate(diff = col - lag(col))
}
for (col in columns){
print(col)
}
df <- composite %>% mutate(diff = col - lag(col))
for (col in columns){
df <- composite %>% mutate(paste(col, "_diff") = col - lag(col))
for (col in columns){
paste(col, "_diff")
}
for (col in columns){
print(paste(col, "_diff"))
}
for (col in columns){
print(paste(col, "diff"))
}
knitr::opts_chunk$set(echo = TRUE)
file_paths
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
library(tidyverse)
library(readxl)
library(dplyr)
library(fs)
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 42:73)] %>% filter(composite$Ticker == "AAPL")
colnames(composite)[1] <- c("Date")
for (i in seq_along(file_paths)[-1]) {
df1 <- read_excel(file_paths[i])
df1 <- df1[-c(3:19, 42:73)] %>%
filter(df1$Ticker == "AAPL")
colnames(df1)[1] <- c("Date")
composite <- full_join(composite, df1)
}
view(composite)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(dplyr)
library(fs)
file_paths <- fs::dir_ls("stock_data")
file_paths
# Setting up the master file
composite <- read_excel(file_paths[1])
# Drop information that is not needed (doesn't change day-to-day)
composite <- composite[-c(3:19, 76, 42:73)] %>% filter(composite$Ticker == "AAPL")
colnames(composite)[1] <- c("Date")
view(composite)
colnames(composite)[1] <- c("Date")
for (i in seq_along(file_paths)[-1]) {
df1 <- read_excel(file_paths[i])
df1 <- df1[-c(3:19, 76, 42:73)] %>%
filter(df1$Ticker == "AAPL")
colnames(df1)[1] <- c("Date")
composite <- full_join(composite, df1)
}
write_csv(composite, "compositeAugust.csv")
columns <- colnames(composite)[3:35]
columns <- colnames(composite)[3:35]
for (col in columns){
composite[, col] <- as.numeric(unlist(composite[, col]))
for(row in 2:nrow(composite)){
composite[row, paste0(col, "_diff")] <- composite[row, col] - composite[row - 1, col]
}
}
write_csv(composite, "compositeAugust.csv")
view(composite)
